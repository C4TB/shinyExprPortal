<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Quick Start Guide for shinyExprPortal • shinyExprPortal</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quick Start Guide for shinyExprPortal">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">shinyExprPortal</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/shinyExprPortal.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/config.html">Full Configuration Guide</a></li>
    <li><a class="dropdown-item" href="../articles/customization.html">Portal UI and Code Customization</a></li>
    <li><a class="dropdown-item" href="../articles/dataprep.html">Data Preparation Guide</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/C4TB/shinyExprPortal/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Quick Start Guide for shinyExprPortal</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/C4TB/shinyExprPortal/blob/main/vignettes/shinyExprPortal.Rmd" class="external-link"><code>vignettes/shinyExprPortal.Rmd</code></a></small>
      <div class="d-none name"><code>shinyExprPortal.Rmd</code></div>
    </div>

    
    
<p>The deployment of a portal relies on two data files – an expression
matrix and a table with observed measures (e.g. clinical measures) – and
a configuration file that defines which modules should be displayed in
the portal. In the simplest case, the data will have only one sample per
subject – an interactive command-line wizard can guide you step-by-step
through the creation of the configuration file. If your data contains
more than one sample per subject, for example, for different time
points, the best approach is to run a function that creates an empty
configuration file with placeholders for the fields in the configuration
file that must be completed. This configuration file can then be
modified in an editor such as RStudio or any other text editor. If your
data has multiple samples per subject, you should also check the <a href="dataprep.html">Data Preparation Guide</a> vignette, which
describes the expected format for each data file.</p>
<div class="section level2">
<h2 id="using-the-wizard">Using the wizard<a class="anchor" aria-label="anchor" href="#using-the-wizard"></a>
</h2>
<p>The use of the interactive wizard requires placing files in the
correct folders before starting. The following steps guide you through
this.</p>
<ol style="list-style-type: decimal">
<li><strong>Create a folder where the app will be located</strong></li>
</ol>
<p>To facilitate the organization and deployment of the portal, it is
better to create a folder that contains only the files that are related
to the project. If you use RStudio, you may prefer to create a
project.</p>
<ol start="2" style="list-style-type: decimal">
<li><strong>Copy the expression matrix file to the project
folder</strong></li>
</ol>
<p>The matrix can be a CSV, TSV (tab-separated columns) or .rds file
with a <code>matrix</code> object (not a <code>data.frame</code>). The
matrix should have HGNC or similar gene names in rows and sample
identifiers in columns.</p>
<p>If your matrix has the following format, you can move on to the next
step:</p>
<table class="table">
<colgroup>
<col width="5%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="15%">
<col width="15%">
</colgroup>
<thead><tr class="header">
<th align="left"></th>
<th align="right">S1_01</th>
<th align="right">S1_02</th>
<th align="right">S2_01</th>
<th align="right">S2_02</th>
<th align="right">S3_01</th>
<th align="right">S3_02</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">ABC</td>
<td align="right">-1.4000435</td>
<td align="right">0.2553171</td>
<td align="right">-2.4372636</td>
<td align="right">-0.0055713</td>
<td align="right">0.6215527</td>
<td align="right">1.1484116</td>
</tr>
<tr class="even">
<td align="left">BCD</td>
<td align="right">-1.8218177</td>
<td align="right">-0.2473253</td>
<td align="right">-0.2441996</td>
<td align="right">-0.2827054</td>
<td align="right">-0.5536994</td>
<td align="right">0.6289820</td>
</tr>
<tr class="odd">
<td align="left">CDE</td>
<td align="right">2.0650249</td>
<td align="right">-1.6309894</td>
<td align="right">0.5124269</td>
<td align="right">-1.8630115</td>
<td align="right">-0.5220125</td>
<td align="right">-0.0526019</td>
</tr>
<tr class="even">
<td align="left">DEF</td>
<td align="right">0.5429963</td>
<td align="right">-0.9140748</td>
<td align="right">0.4681544</td>
<td align="right">0.3629513</td>
<td align="right">-1.3045435</td>
<td align="right">0.7377763</td>
</tr>
<tr class="odd">
<td align="left">EFG</td>
<td align="right">1.8885049</td>
<td align="right">-0.0974451</td>
<td align="right">-0.9358474</td>
<td align="right">-0.0159503</td>
<td align="right">-0.8267890</td>
<td align="right">-1.5123997</td>
</tr>
<tr class="even">
<td align="left">FGH</td>
<td align="right">0.9353632</td>
<td align="right">0.1764886</td>
<td align="right">0.2436855</td>
<td align="right">1.6235489</td>
<td align="right">0.1120381</td>
<td align="right">-0.1339970</td>
</tr>
<tr class="odd">
<td align="left">GHI</td>
<td align="right">-1.9100875</td>
<td align="right">-0.2792372</td>
<td align="right">-0.3134460</td>
<td align="right">1.0673079</td>
<td align="right">0.0700349</td>
<td align="right">-0.6391233</td>
</tr>
<tr class="even">
<td align="left">HIJ</td>
<td align="right">-0.0499649</td>
<td align="right">-0.2514834</td>
<td align="right">0.4447971</td>
<td align="right">2.7554176</td>
<td align="right">0.0465314</td>
<td align="right">0.5777091</td>
</tr>
<tr class="odd">
<td align="left">IJK</td>
<td align="right">0.1181949</td>
<td align="right">-1.9117205</td>
<td align="right">0.8620865</td>
<td align="right">-0.2432367</td>
<td align="right">-0.2060872</td>
<td align="right">0.0191776</td>
</tr>
<tr class="even">
<td align="left">JKL</td>
<td align="right">0.0295608</td>
<td align="right">0.5498275</td>
<td align="right">-2.2741149</td>
<td align="right">2.6825572</td>
<td align="right">-0.3612213</td>
<td align="right">0.2133557</td>
</tr>
</tbody>
</table>
<ol start="3" style="list-style-type: decimal">
<li><strong>Copy a measures table file to the project
folder</strong></li>
</ol>
<p>This table can be a CSV, TSV or .rds file with a
<code>data.frame</code> object. In this file, each row corresponds to a
different subject and the order must match the order of samples in the
expression matrix (if your data contains more than one sample per
subject, you should follow the <a href="dataprep.html">Data Preparation
Guide</a> and not follow these steps). The first column of this table
should be named and contain subject or sample identifiers.</p>
<p>If your measures table has the following format, you can move on to
the next step:</p>
<table class="table">
<thead><tr class="header">
<th align="left">Sample_ID</th>
<th align="right">Platelets_m01</th>
<th align="right">Platelets_m02</th>
<th align="right">Age</th>
<th align="left">drugNaive</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">S1</td>
<td align="right">235.8666</td>
<td align="right">241.8803</td>
<td align="right">54</td>
<td align="left">Yes</td>
</tr>
<tr class="even">
<td align="left">S2</td>
<td align="right">206.6894</td>
<td align="right">236.7350</td>
<td align="right">76</td>
<td align="left">Yes</td>
</tr>
<tr class="odd">
<td align="left">S3</td>
<td align="right">175.2997</td>
<td align="right">174.8539</td>
<td align="right">37</td>
<td align="left">No</td>
</tr>
</tbody>
</table>
<ol start="4" style="list-style-type: decimal">
<li><em>Optionally copy a metadata table file to the folder</em></li>
</ol>
<p>This table should also be in any the formats above and should not
have any sample or subject identifier columns. The columns of this table
will be used to populate the interface with radio buttons to allow
sample subset selection. It should also follow a one row per
subject/sample format.</p>
<p>Finally,</p>
<ol start="5" style="list-style-type: decimal">
<li><strong>In R, load the package and run
<code>create_config_wizard(getwd())</code></strong></li>
</ol>
<p>If you are not using an RStudio project, ensure that the folder with
the files is the current working directory. You can check the current
working directory with <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code> and use
<code>setwd("path/to/folder")</code> to modify it. You should then run
<code>create_config_wizard(getwd())</code>.</p>
<p><em>The wizard will inform you about what each step is doing and will
ask you questions about names of files and other details to create the
configuration file</em>. It will also wait when you are required to do
additional actions such as creating folders and copying files. Depending
on your choices, at least two files will have been created when you
finish it: <code>app.R</code> and <code>config.yaml</code>.</p>
<ol start="6" style="list-style-type: decimal">
<li><strong>Open and execute the code of app.R to test the
portal</strong></li>
</ol>
<p>Still using R (or RStudio) you can source the app.R file to run the
code and open the portal on your browser. You can also copy the project
folder to a Shiny server or use the <a href="https://rstudio.github.io/rsconnect/" class="external-link">rsconnect</a> package to
deploy it to shinyapps.io.</p>
</div>
<div class="section level2">
<h2 id="creating-a-config-template">Creating a config template<a class="anchor" aria-label="anchor" href="#creating-a-config-template"></a>
</h2>
<p>If your data is more complex than the case outlined above, you can
run <code>create_config_template(getwd())</code> to create a config.yaml
file that will contain placeholder names to be replaced. If you decide
to use this method, you will have to create a lookup table file, by
default named <code>lookup_table.csv</code>, which matches samples with
subjects in the measures table and looks like the following:</p>
<pre><code><span><span class="co">#&gt;       source sample_id subject_id     group</span></span>
<span><span class="co">#&gt; 1 microarray  sample_1  subject_1   control</span></span>
<span><span class="co">#&gt; 2 microarray  sample_2  subject_2 treatment</span></span>
<span><span class="co">#&gt; 3 microarray  sample_3  subject_3 treatment</span></span></code></pre>
<p>As you can see above, the lookup table also includes sample metadata
information (group). Any metadata that you want to use to create subsets
in the interface (e.g. to compute correlations only for a control group)
should be included in this table and then defined in the configuration
file under sample_categories, as following:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">sample_categories</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> group</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a><span class="at">    </span><span class="fu">label</span><span class="kw">:</span><span class="at"> Group</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a><span class="at">    </span><span class="fu">values</span><span class="kw">:</span></span>
<span id="cb2-5"><a href="#cb2-5" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> treatment</span></span>
<span id="cb2-6"><a href="#cb2-6" tabindex="-1"></a><span class="at">      </span><span class="kw">-</span><span class="at"> control</span></span></code></pre></div>
<p>In the modules of the portal that allow the selection of subset of
samples, the configuration above will appear as the following
control:</p>
<p><img src="samplecat-example.png" style="width:33.0%"></p>
<div class="section level3">
<h3 id="including-new-modules-in-the-configuration">Including new modules in the configuration<a class="anchor" aria-label="anchor" href="#including-new-modules-in-the-configuration"></a>
</h3>
<p>After the config.yaml file has been created, you can edit it to
modify the setup of modules that have already been defined or include
new ones. The modules available in the package vary between their
requirements and aims: some of them are more exploratory and only
require changes to the configuration file, while others were designed to
help showcase and explore results of analysis. If you have computed sets
of genes using a package such as WGCNA, you can create a table to load
them into the geneModulesHeatmap module, for example. In the current
version, the following modules are available:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">shinyExprPortal</span><span class="fu">::</span><span class="fu"><a href="../reference/show_available_modules.html">show_available_modules</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "cohortOverview"        "degModules"            "degSummary"           </span></span>
<span><span class="co">#&gt;  [4] "degDetails"            "corrModules"           "singleGeneCorr"       </span></span>
<span><span class="co">#&gt;  [7] "singleMeasureCorr"     "geneModulesHeatmap"    "multiMeasureCorr"     </span></span>
<span><span class="co">#&gt; [10] "compareTrajGroups"     "geneProjectionOverlay"</span></span></code></pre></div>
<p>The modules are split in their requirements as follows:</p>
<p><strong>No additional files needed</strong></p>
<ul>
<li>Single gene/multiple measures correlations</li>
<li>Single measure/all genes correlation</li>
<li>Multi-measure/all genes correlation</li>
<li>Expression/measures changes over time</li>
</ul>
<p><strong>Additional files needed</strong></p>
<ul>
<li>Differential expression models summary page: table of models, DE
packages outputs (e.g. limma, deseq2, edgeR)</li>
<li>Differential expression models visualization: table of models, DE
packages outputs (e.g. limma, deseq2, edgeR)</li>
<li>Gene modules heatmap: data frame with gene lists (WGCNA, genes of
interest, etc.)</li>
<li>2D gene projection (e.g. MDS, UMAP): data frame with 2D coordinates
for all genes</li>
</ul>
<p>Check the <a href="config.html">Full Configuration Guide</a> for
details about each module and how to set up the additional files
required by each of them.</p>
</div>
<div class="section level3">
<h3 id="deploying-the-portal-remotely">Deploying the portal remotely<a class="anchor" aria-label="anchor" href="#deploying-the-portal-remotely"></a>
</h3>
<p>You can deploy the app in your Posit/RStudio Connect server or in the
public shinyapps.io website (note that you cannot password-protect the
portal under the free plan). You can follow the <a href="https://shiny.rstudio.com/articles/shinyapps.html" class="external-link">guide</a> to
set up your account and install the required packages. The only other
requirement is to change the app.R file by including the optional
dependencies for each module (as listed in the configuration guide).</p>
<p>For example, the original app.R would look like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://c4tb.github.io/shinyExprPortal/">shinyExprPortal</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span><span class="st">"config.yaml"</span><span class="op">)</span></span></code></pre></div>
<p>If you want to use the geneModulesHeatmap module, to visualize
heatmaps of lists of genes, you must also have the RColorBrewer
installed. To deploy it in shinyapps.io, you must then import it as in
the example below:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">shinExprPortal</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">RColorBrewer</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/run_app.html">run_app</a></span><span class="op">(</span><span class="st">"config.yaml"</span><span class="op">)</span></span></code></pre></div>
<p>```</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Rafael Henkin.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
